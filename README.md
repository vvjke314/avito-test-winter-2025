# avito-test-winter-2025
## Тестовое задание на стажировку в Avito. Зима 2025

### Как запустить проект
```
docker compose up -d
```

Запустятся 2 контейнера: наш веб-сервис по адресу localhost:8080 (порты проброшены) и БД на posgreSQL на порту 5432. CORS полиитика была настроена, так что сервис готов получать запросы из вне

### Как пользоваться api
Документация api представлена в полной форме [здесь]()

### Как проходила работа
Было выдано ТЗ, которое нужно было выполнить.

После изучения ТЗ было необходимо изучить предоставленное API\* и выбрать технологии для решения. В плане языка программирования я остановился на Go в нем я буду использовать следующие фреймворки: Gin, Pgx, Goose (для миграций). В качестве основной базы данных я буду использовать PostgreSQL. Возможно в дальнейшнем понадобиться реализивать кэширование запросов (Redis), или другие технологии для решения задачи. Но пока что останавлюсь на вышеперечисленных.

Затем я решил составить ER-диаграмму для последующей реализации. В нее я решил почти не добавлять лишнюю информацию, только ту, которая минимально необходима для решения задачи (время создания транзакций). В этом моменте проблем не было.

Переходим к реализации. Начал, как всегда со структуры проекта, следуя go-project-layout. Затем подготовил структуры данных, определенных в ER-диаграмме и написал инициализирующие миграции с помощью goose, а также заполнил merch таблицу. Также решил добавить индексы для оптимизации запросов.

Описал сервис базы данных через docker compose. Создал структуру для конфигурации (чтение из переменных окружения). Начал инициализировать приложение. 

Далее начал реализовывать структуры тел запросов и ответов в соответствии с API и начал реализовывать ручки веб-сервиса. 

Первой ручкой была аутентификация. Если пользователя с введенным username не существует => такой пользователь создается. Если username существует, то мы проверяем хеш-пароля с имеющимся хешем в БД в случае соответствия мы возрващаем 200 статус и токен аутентификации. 

Перешел на реализацию всех необходимых методов для работы с БД: (~~создание записи о сотруднике~~, ~~поиск сотрудника по никнейму~~, ~~передача монет, покупка предметов, просмотр информации о всех передачах, просмотр информации о товарах клиента~~) 

Далее рализуем веб хендлеры в соответствии с нашим API. В процессе разработке стоклнулся с проблемой проектирования из-за которой пришлось реализовывать все хендлеры в пакете app.

Реализовал и протестировал API (~~auth~~, ~~buyItem~~, ~~sendCoin, getInfo~~). Написал простое e2e-тестирование для описанных в условие случаях.